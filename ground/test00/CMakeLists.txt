CMAKE_MINIMUM_REQUIRED(VERSION 3.20 FATAL_ERROR)
PROJECT(TEST VERSION 1.2.3.4)

SET(A_A aa)
SET(var A)
MESSAGE(STATUS "${A_${var}}")

FUNCTION(PRINT_VAR var)
    MESSAGE(STATUS "${var}: ${${var}}")
ENDFUNCTION()

FUNCTION(PRINT_VALUE value)
    MESSAGE(STATUS "${value}")
ENDFUNCTION()

PRINT_VAR(PROJECT_SOURCE_DIR)
PRINT_VAR(CMAKE_PROJECT_NAME)
PRINT_VAR(PROJECT_VERSION)
PRINT_VAR(PROJECT_VERSION_MAJOR)
PRINT_VAR(PROJECT_VERSION_MINOR)
PRINT_VAR(PROJECT_VERSION_PATCH)
PRINT_VAR(PROJECT_VERSION_TWEAK)

SET(MY_BOOL TRUE CACHE BOOL "My bool")
SET(MY_STRING "a string" CACHE STRING "My string")
SET(MY_PATH ../.. CACHE PATH "My path")
SET(MY_FILEPATH "../../CMakeLists.txt" CACHE FILEPATH "My filepath")

FUNCTION(PARSE)
    CMAKE_PARSE_ARGUMENTS("ARG" # prefix
            "TEST;INSTALL" # TRUE / FALSE
            "MODE"
            "NUMS" # list
            ${ARGN})
    PRINT_VAR(ARG_TEST)
    PRINT_VAR(ARG_INSTALL)
    PRINT_VAR(ARG_MODE)
    PRINT_VAR(ARG_NUMS)
ENDFUNCTION()

PARSE(TEST
        MODE EXE
        NUMS 1 2 3 4)

SET(i 0)
SET(n 5)
WHILE (i LESS n)
    PRINT_VAR(i)
    MATH(EXPR i "${i} + 1")
ENDWHILE ()

SET(NUMS 1 2 3 4 5)
FOREACH (NUM ${NUMS})
    PRINT_VALUE(${NUM})
ENDFOREACH ()

SET(LIST0 1 2 3 4 5) # LIST0: 1;2;3;4;5
SET(LIST1 a b c d e) # LIST1: a;b;c;d;e
LIST(LENGTH LIST0 n)
SET(i 0)
WHILE (i LESS n)
    LIST(GET LIST0 ${i} v0)
    LIST(GET LIST1 ${i} v1)
    MESSAGE(STATUS "${v0}, ${v1}")
    MATH(EXPR i "${i} + 1")
ENDWHILE ()

SET(NUM_LETTERS 1 a 2 b 3 c)
LIST(LENGTH NUM_LETTERS n)
SET(i 0)
WHILE (i LESS n)
    LIST(SUBLIST NUM_LETTERS ${i} 2 NUM_LETTER)
    LIST(GET NUM_LETTER 0 NUM)
    LIST(GET NUM_LETTER 1 LETTER)

    MESSAGE(STATUS "Num : ${NUM}, Letter : ${LETTER}")

    MATH(EXPR i "${i} + 2")
ENDWHILE ()

STRING(REGEX
        MATCH
        "/(([^/]*)\\.(.*))$"
        out
        "xxx/ddd/aa.eee")

PRINT_VAR(out)
PRINT_VAR(CMAKE_MATCH_COUNT)
SET(i 0)
WHILE (i LESS_EQUAL CMAKE_MATCH_COUNT)
    PRINT_VAR(CMAKE_MATCH_${i})
    MATH(EXPR i "${i} + 1")
ENDWHILE ()

STRING(REGEX
        MATCHALL
        "[_a-zA-Z][_a-zA-Z0-9]*"
        out
        "xxx/ddd/aa.eee")

PRINT_VAR(out)
PRINT_VAR(CMAKE_MATCH_COUNT)
SET(i 0)
WHILE (i LESS_EQUAL CMAKE_MATCH_COUNT)
    PRINT_VAR(CMAKE_MATCH_${i})
    MATH(EXPR i "${i} + 1")
ENDWHILE ()

SET(data 1 2 3 4 5 a 6 b 7)
LIST(FILTER data
        INCLUDE
        REGEX "[0-9]")
PRINT_VAR(data)

SET(data 1 2 3 4 5 a 6 b 7)
LIST(FILTER data
        EXCLUDE
        REGEX "[0-9]")
PRINT_VAR(data)

SET(SPECIAL_STR "aaa;bbb")

# example 1
MESSAGE(STATUS ${SPECIAL_STR}) # aaabbb
MESSAGE(STATUS "${SPECIAL_STR}") # aaa;bbb

# example 2
FUNCTION(PRINT_VAR var)
    MESSAGE(STATUS "${var}")
ENDFUNCTION()

PRINT_VAR(${SPECIAL_STR})
PRINT_VAR("${SPECIAL_STR}")

FILE(READ "${CMAKE_SOURCE_DIR}/CMakeLists.txt" FILE_STR)
# PRINT_VALUE("${FILE_STR}")

FILE(REMOVE_RECURSE "testdir")

SET(flag 0)
IF (flag)
    MESSAGE(STATUS "flag")
ENDIF ()